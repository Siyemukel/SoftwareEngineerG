{% extends "base.html" %}

{% block content %}
<div class="student-survey-container">
    <h2>{{ student.name }}'s Survey</h2>
    <p class="student-details">Student ID: {{ student.id }} | Email: {{ student.student_email }}</p>

    {% if surveys %}
        {% for survey in surveys %}
        <div class="survey-card">
            <h5>Survey taken on {{ survey.created_at.strftime('%b %d, %Y') }}</h5>
            <table class="survey-table">
                <thead>
                    <tr>
                        <th>Question</th>
                        <th>Response</th>
                    </tr>
                </thead>
                <tbody>
                    {% for key, value in survey.survey_data.items() %}
                    <tr>
                        <td data-label="Question">{{ key.replace('_', ' ').title() }}</td>
                        <td data-label="Response">
                            {% if value == 1 %}
                                <span class="response-struggle">Struggle</span>
                            {% else %}
                                <span class="response-no-struggle">No struggle</span>
                            {% endif %}
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% endfor %}
    {% else %}
        <p class="student-details">No survey submitted by this student yet.</p>
    {% endif %}

    <a href="{{ url_for('main.staff_dashboard') }}" class="back-btn">Back to Dashboard</a>
</div>
{% endblock %}